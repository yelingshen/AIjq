<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>AI助手实时反馈</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f7f7f7; margin: 0; }
        .container { max-inline-size: 800px; margin: 40px auto; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px #ccc; padding: 24px; }
        h2 { color: #2c3e50; }
        .log { background: #222; color: #eee; padding: 16px; border-radius: 6px; font-size: 15px; white-space: pre-wrap; max-height: 500px; overflow-y: auto; }
        .refresh { margin-top: 16px; }
    </style>
    <script>
        async function loadLog() {
            const res = await fetch('/feedback_log');
            const text = await res.text();
            document.getElementById('log').textContent = text;
            showPopup(text);
        }
        window.onload = loadLog;
        function showPopup(msg) {
            const popup = document.createElement('div');
            popup.style.position = 'fixed';
            popup.style.top = '20px';
            popup.style.right = '20px';
            popup.style.background = '#2c3e50';
            popup.style.color = '#fff';
            popup.style.padding = '18px 28px';
            popup.style.borderRadius = '8px';
            popup.style.boxShadow = '0 2px 12px #888';
            popup.style.zIndex = '9999';
            popup.style.maxWidth = '480px';
            popup.style.fontSize = '16px';
            popup.style.lineHeight = '1.6';
            popup.innerText = msg.length > 600 ? msg.slice(0,600)+'...\n(详情见下方)' : msg;
            document.body.appendChild(popup);
            setTimeout(() => popup.remove(), 8000);
        }
    </script>
</head>
<body>
    <div class="container">
        <h2>AI助手实时反馈</h2>
        <div id="log" class="log">加载中...</div>
        <button class="refresh" onclick="loadLog()">刷新</button>
    </div>
</body>
</html>
